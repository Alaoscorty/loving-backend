

# dev
git commit -m "fix auth"

# mise √† jour auto
eas update --branch preview --message "fix auth"
eas update --branch preview --message "mise a jour du code"



Je veux que tu ajoute un assistant IA GEMINI_API_KEY=AIzaSyAbq98gLSns1OPvy_oWJ9naQi3QeAIxwIw qui aura pour but de consiller les utilisateurs et les providers un peu comme ce que fais meta Ai. De plus je veux que tu fasse en sorte que les utilisteurs et les providers puissent s'√©changer des images et que leur conversations s'affiche avec un look plus moderne. De plus certains √©crans vont jusqu'au niveau de la barre du t√©l√©phone ou s'affiche la charge, la date et les notifications donc refait leur dimensions.Et fais √©galement les favories. 


j'ai un probl√®me, quand je cr√©e un compte prestataire, l'inscription r√©ussi mais au moment d'afficher le dashboard du prestataire, j'ai la page login qui s'affiche. Quand j'entre les coordon√©es du compte que j'ai cr√©e, l'application s'arrete automatiquement .Alors que quand je cr√©e un compte utilisateur ou administrateur,j'acc√®de √† leur dashboard sans probl√®me (fait)

ensuite je veux que tu prenne connaissance de "@AUDIT_PLAN_VS_CODE.md (1-163) " et de @AA_MON_PROJET.md (1-269) et fait moi les impl√©mentations et pages manquantes sans casser mon code actuelle. 

la page bookings du code user fait arreter imm√©diatement l'appliacation quant on clique dessus .
Je veux que la page de validation des profils de l'ad√πinistrateur, r√©cup√®re le profil des utilisateur et des prestataires avec le boutons d'approbation et celui de rejets. Le bouton d'approbation permettra de faire office de validation d√©finitive du compte.Et le bouton de rejet permettra de banir le compte.


Sur le dashboard de l'administrateur, le bouton susprendre un compte, permettra de susprendre temporairement un compte que ce soit celui de l'utilisateur ou celui du prestataire √©galement il faut que les stats, utilisateur, prestataires, r√©seravtionsseront dynamiques et calculer directement depuis l'API.


La page de gestion des profils affichera tous les comptes que ce soit celui del'utilisateur ou celui du prestataire qui ont √©t√© approuv√©s ou rej√©t√©s et l√† ou il y 0profil(s) en attente comptera le nombre de compte total.


La page de gestion des utilisateurs fera le trie des compte user, provider et admin avec la possibilit√©s de rechcher un compte 


la page de gestion advanced-dashboard.tsx affichera les donn√©s dynamiques depuis la bases de donn√©s .La tendance des revenus serait dynamiques ainsi que les r√©seravtions par jour. Tous cela en fonction de la semaine, du mois et de l'ann√©e.

Dans le chat de l'utilisateur, fais moi"üé• brancher cam√©ra / galerie r√©elles üéôÔ∏è audio WhatsApp-like üëÄ accus√©s de lecture ‚ú® animations fluides, üü¢ statut ‚Äúen ligne / en train d‚Äô√©crire‚Ä¶".

Ajouter les favoris de l'utilisateur √† la page qui r√©cup√®re les favoris lorsque l'utilisateur ajoute un favoris au lieu de lui envoyer juste une alerte.

Sur la chat, afficher l'image de l'utilisateur ainsi que celui de son interlocuteur.
Sur conervation-list, afficher l'image de l'utilisateur ainsi que son nom au lieu de monter juste un avatar avec U et le nom utilisateur.Rendre ensuite la barre de recherche dynamique.
Ajouter ensuite les param√®tres 

FAire en sorte que le bottom sheet de la page login, register et r√©gister admin puisse scroller pour afficher le contenue du bas afin de faciliter l'utilisation √† l'utilisateur

Je d√©veloppe une app React Native/Expo appel√©e "Loving" avec un backend Node.js/Express. J'ai un probl√®me critique avec l'inscription des prestataires (providers) :

**PROBL√àME PRINCIPAL :**
- L'inscription du prestataire r√©ussit c√¥t√© backend
- Apr√®s inscription, l'utilisateur est cens√© √™tre redirig√© vers son dashboard (/provider/dashboard)
- Mais au lieu de √ßa, la page de login s'affiche
- Quand l'utilisateur entre ses identifiants manuellement, l'app crash

**CONTEXTE TECHNIQUE :**
- Frontend : React Native + Expo Router
- Backend : Node.js + Express + MongoDB
- Authentification : JWT tokens stock√©s dans SecureStore/AsyncStorage
- Architecture : Routes group√©es par r√¥le (auth), (user), (provider), (admin)

**FLUX D'INSCRIPTION ACTUEL :**
1. User s'inscrit avec role: 'provider' dans register.tsx
2. Backend cr√©e user + profile provider
3. Frontend appelle login() avec tokens re√ßus
4. Redirection vers /(provider)/dashboard
5. Mais dashboard affiche page login au lieu du contenu

**FICHIERS CONCERN√âS :**
- frontend/app/(auth)/register.tsx (logique inscription)
- frontend/app/index.tsx (redirections par r√¥le)
- frontend/app/(provider)/_layout.tsx (protection routes provider)
- frontend/contexts/AuthContext.tsx (gestion auth state)
- backend/src/controllers/auth.controller.ts (logique backend)

**ERREURS TYPESCRIPT √Ä CORRIGER :**
Voici les erreurs TypeScript principales √† r√©soudre :
- notificationService introuvable dans _layout.tsx
- Erreurs de types dans admin.routes.ts (propri√©t√©s firstName, lastName, email, phone sur ObjectId)
- Erreurs de style dans validate-profiles.tsx (fichier corrompu)
- Types manquants dans reports.tsx et autres fichiers admin
- Erreurs de types dans booking-details.tsx et autres composants

**CE QUE JE VEUX :**
1. **FIX CRITIQUE** : Apr√®s inscription provider, redirection directe vers dashboard provider (pas page login)
2. **FIX AUTH FLOW** : S'assurer que login() met √† jour correctement l'√©tat auth avant redirection
3. **FIX TYPESCRIPT** : Corriger toutes les erreurs TypeScript list√©es
4. **TEST** : V√©rifier que l'inscription provider fonctionne de A √† Z

**CODE ACTUEL CL√â :**
Voici des extraits du code actuel :

**register.tsx :**
```typescript
if (data?.data?.token && data?.data?.refreshToken && data?.data?.user) {
  await login(data.data.token, data.data.refreshToken, data.data.user);
  if (data.data.user.role === 'provider') {
    router.replace('/(provider)/dashboard'); // <-- PROBL√àME ICI ?
  } else {
    router.replace('/(user)/home');
  }
}
